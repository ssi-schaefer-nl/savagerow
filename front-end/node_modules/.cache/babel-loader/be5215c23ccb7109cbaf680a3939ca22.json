{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = dirtyHandlerIds;\nexports.areDirty = areDirty;\n\nvar _xor = require('lodash/xor');\n\nvar _xor2 = _interopRequireDefault(_xor);\n\nvar _intersection = require('lodash/intersection');\n\nvar _intersection2 = _interopRequireDefault(_intersection);\n\nvar _dragDrop = require('../actions/dragDrop');\n\nvar _registry = require('../actions/registry');\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar NONE = [];\nvar ALL = [];\n\nfunction dirtyHandlerIds() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : NONE;\n  var action = arguments[1];\n  var dragOperation = arguments[2];\n\n  switch (action.type) {\n    case _dragDrop.HOVER:\n      break;\n\n    case _registry.ADD_SOURCE:\n    case _registry.ADD_TARGET:\n    case _registry.REMOVE_TARGET:\n    case _registry.REMOVE_SOURCE:\n      return NONE;\n\n    case _dragDrop.BEGIN_DRAG:\n    case _dragDrop.PUBLISH_DRAG_SOURCE:\n    case _dragDrop.END_DRAG:\n    case _dragDrop.DROP:\n    default:\n      return ALL;\n  }\n\n  var targetIds = action.targetIds;\n  var prevTargetIds = dragOperation.targetIds;\n  var result = (0, _xor2.default)(targetIds, prevTargetIds);\n  var didChange = false;\n\n  if (result.length === 0) {\n    for (var i = 0; i < targetIds.length; i++) {\n      if (targetIds[i] !== prevTargetIds[i]) {\n        didChange = true;\n        break;\n      }\n    }\n  } else {\n    didChange = true;\n  }\n\n  if (!didChange) {\n    return NONE;\n  }\n\n  var prevInnermostTargetId = prevTargetIds[prevTargetIds.length - 1];\n  var innermostTargetId = targetIds[targetIds.length - 1];\n\n  if (prevInnermostTargetId !== innermostTargetId) {\n    if (prevInnermostTargetId) {\n      result.push(prevInnermostTargetId);\n    }\n\n    if (innermostTargetId) {\n      result.push(innermostTargetId);\n    }\n  }\n\n  return result;\n}\n\nfunction areDirty(state, handlerIds) {\n  if (state === NONE) {\n    return false;\n  }\n\n  if (state === ALL || typeof handlerIds === 'undefined') {\n    return true;\n  }\n\n  return (0, _intersection2.default)(handlerIds, state).length > 0;\n}","map":{"version":3,"sources":["C:/Users/vincent/git/savagerow/front-end/node_modules/dnd-core/lib/reducers/dirtyHandlerIds.js"],"names":["Object","defineProperty","exports","value","default","dirtyHandlerIds","areDirty","_xor","require","_xor2","_interopRequireDefault","_intersection","_intersection2","_dragDrop","_registry","obj","__esModule","NONE","ALL","state","arguments","length","undefined","action","dragOperation","type","HOVER","ADD_SOURCE","ADD_TARGET","REMOVE_TARGET","REMOVE_SOURCE","BEGIN_DRAG","PUBLISH_DRAG_SOURCE","END_DRAG","DROP","targetIds","prevTargetIds","result","didChange","i","prevInnermostTargetId","innermostTargetId","push","handlerIds"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports.default = dirtyHandlerIds;\nexports.areDirty = areDirty;\n\nvar _xor = require('lodash/xor');\n\nvar _xor2 = _interopRequireDefault(_xor);\n\nvar _intersection = require('lodash/intersection');\n\nvar _intersection2 = _interopRequireDefault(_intersection);\n\nvar _dragDrop = require('../actions/dragDrop');\n\nvar _registry = require('../actions/registry');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar NONE = [];\nvar ALL = [];\n\nfunction dirtyHandlerIds() {\n\tvar state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : NONE;\n\tvar action = arguments[1];\n\tvar dragOperation = arguments[2];\n\n\tswitch (action.type) {\n\t\tcase _dragDrop.HOVER:\n\t\t\tbreak;\n\t\tcase _registry.ADD_SOURCE:\n\t\tcase _registry.ADD_TARGET:\n\t\tcase _registry.REMOVE_TARGET:\n\t\tcase _registry.REMOVE_SOURCE:\n\t\t\treturn NONE;\n\t\tcase _dragDrop.BEGIN_DRAG:\n\t\tcase _dragDrop.PUBLISH_DRAG_SOURCE:\n\t\tcase _dragDrop.END_DRAG:\n\t\tcase _dragDrop.DROP:\n\t\tdefault:\n\t\t\treturn ALL;\n\t}\n\n\tvar targetIds = action.targetIds;\n\tvar prevTargetIds = dragOperation.targetIds;\n\n\tvar result = (0, _xor2.default)(targetIds, prevTargetIds);\n\n\tvar didChange = false;\n\tif (result.length === 0) {\n\t\tfor (var i = 0; i < targetIds.length; i++) {\n\t\t\tif (targetIds[i] !== prevTargetIds[i]) {\n\t\t\t\tdidChange = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t} else {\n\t\tdidChange = true;\n\t}\n\n\tif (!didChange) {\n\t\treturn NONE;\n\t}\n\n\tvar prevInnermostTargetId = prevTargetIds[prevTargetIds.length - 1];\n\tvar innermostTargetId = targetIds[targetIds.length - 1];\n\n\tif (prevInnermostTargetId !== innermostTargetId) {\n\t\tif (prevInnermostTargetId) {\n\t\t\tresult.push(prevInnermostTargetId);\n\t\t}\n\t\tif (innermostTargetId) {\n\t\t\tresult.push(innermostTargetId);\n\t\t}\n\t}\n\n\treturn result;\n}\n\nfunction areDirty(state, handlerIds) {\n\tif (state === NONE) {\n\t\treturn false;\n\t}\n\n\tif (state === ALL || typeof handlerIds === 'undefined') {\n\t\treturn true;\n\t}\n\n\treturn (0, _intersection2.default)(handlerIds, state).length > 0;\n}"]},"metadata":{},"sourceType":"script"}