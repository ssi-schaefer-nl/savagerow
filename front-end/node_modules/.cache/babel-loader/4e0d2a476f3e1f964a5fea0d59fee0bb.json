{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\vincent\\\\git\\\\playground\\\\src\\\\Components\\\\DatabaseSelect\\\\DatabaseSelect.js\";\nimport React from \"react\";\nimport Typography from '@material-ui/core/Typography';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport { CircularProgress, Divider } from \"@material-ui/core\";\nimport CollapsableAlert from \"../CollapsableAlert/CollapsableAlert\";\nimport ConfigureService from \"../../Service/ConfigureService\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nclass DatabaseSelect extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      configureService: new ConfigureService(),\n      databases: [],\n      anchorEl: null,\n      loadingAvailableDatabases: true,\n      onSelect: this.props.onSelect\n    };\n\n    this.handleChange = e => {\n      var database = e.target.value;\n      this.state.configureService.changeDatabases(database, function (data) {\n        this.setState({\n          database: database\n        });\n        this.state.onSelect();\n      }.bind(this), function (data) {\n        console.log(\"did not change db\");\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.setState({\n      value: this.props.initialValue\n    });\n    this.state.configureService.listAllDatabases(function (data) {\n      this.setState({\n        databases: data.data\n      });\n      this.setState({\n        loadingAvailableDatabases: false\n      });\n    }.bind(this), function (data) {\n      console.log(data);\n      this.setState({\n        loadingAvailableDatabases: false,\n        loadingError: true\n      });\n    }.bind(this));\n  }\n\n  render() {\n    if (this.state.loadingAvailableDatabases) {\n      return /*#__PURE__*/_jsxDEV(CircularProgress, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 21\n      }, this);\n    } else if (this.state.loadingError) {\n      return /*#__PURE__*/_jsxDEV(CollapsableAlert, {\n        severity: \"warning\",\n        message: \"Unable to fetch available databases. Check database connection.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 21\n      }, this);\n    }\n\n    var val = this.state.database ? this.state.database : this.props.initialValue ? this.props.initialValue : \"\";\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(FormControl, {\n        style: {\n          margin: 1,\n          minWidth: 120\n        },\n        children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n          shrink: true,\n          id: \"demo-simple-select-label\",\n          children: \"Database\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Select, {\n          labelId: \"demo-simple-select-label\",\n          id: \"demo-simple-select\",\n          value: val,\n          onChange: this.handleChange,\n          children: this.state.databases.map(d => /*#__PURE__*/_jsxDEV(MenuItem, {\n            value: d,\n            children: d\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 29\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 17\n      }, this)\n    }, void 0, false);\n  }\n\n}\n\nexport default DatabaseSelect;","map":{"version":3,"sources":["C:/Users/vincent/git/playground/src/Components/DatabaseSelect/DatabaseSelect.js"],"names":["React","Typography","InputLabel","MenuItem","FormControl","Select","CircularProgress","Divider","CollapsableAlert","ConfigureService","DatabaseSelect","Component","state","configureService","databases","anchorEl","loadingAvailableDatabases","onSelect","props","handleChange","e","database","target","value","changeDatabases","data","setState","bind","console","log","componentDidMount","initialValue","listAllDatabases","loadingError","render","val","margin","minWidth","map","d"],"mappings":"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","sourcesContent":["import React from \"react\";\r\n\r\nimport Typography from '@material-ui/core/Typography';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Select from '@material-ui/core/Select';\r\nimport { CircularProgress, Divider } from \"@material-ui/core\";\r\nimport CollapsableAlert from \"../CollapsableAlert/CollapsableAlert\";\r\nimport ConfigureService from \"../../Service/ConfigureService\";\r\n\r\n\r\nclass DatabaseSelect extends React.Component {\r\n    state = {\r\n        configureService: new ConfigureService(),\r\n        databases: [],\r\n        anchorEl: null,\r\n        loadingAvailableDatabases: true,\r\n        onSelect: this.props.onSelect\r\n    };\r\n\r\n    componentDidMount() {\r\n        this.setState({value: this.props.initialValue})\r\n        this.state.configureService.listAllDatabases(\r\n            function (data) {\r\n                this.setState({ databases: data.data })\r\n                this.setState({ loadingAvailableDatabases: false })\r\n            }.bind(this),\r\n            function (data) {\r\n                console.log(data)\r\n                this.setState({ loadingAvailableDatabases: false, loadingError: true })\r\n            }.bind(this));\r\n\r\n    }\r\n\r\n    handleChange = (e) => {\r\n        var database = e.target.value\r\n        this.state.configureService.changeDatabases(\r\n            database,\r\n            function (data) {\r\n                this.setState({ database: database })\r\n                this.state.onSelect()\r\n            }.bind(this),\r\n            function (data) {\r\n                console.log(\"did not change db\")\r\n            });\r\n    }\r\n\r\n    render() {\r\n        if (this.state.loadingAvailableDatabases) {\r\n            return (<CircularProgress />)\r\n        } else if (this.state.loadingError) {\r\n            return (<CollapsableAlert severity=\"warning\" message=\"Unable to fetch available databases. Check database connection.\" />)\r\n        }\r\n\r\n        var val = this.state.database ? this.state.database : this.props.initialValue ? this.props.initialValue : \"\"\r\n        return (\r\n            <>\r\n                <FormControl style={{ margin: 1, minWidth: 120 }}>\r\n                    <InputLabel shrink={true} id=\"demo-simple-select-label\">Database</InputLabel>\r\n                    <Select\r\n                        labelId=\"demo-simple-select-label\"\r\n                        id=\"demo-simple-select\"\r\n                        value={val}\r\n                        onChange={this.handleChange}\r\n                    >\r\n                        {this.state.databases.map(d => (\r\n                            <MenuItem value={d}>{d}</MenuItem>\r\n                        ))}\r\n\r\n                    </Select>\r\n                </FormControl>\r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\nexport default DatabaseSelect"]},"metadata":{},"sourceType":"module"}