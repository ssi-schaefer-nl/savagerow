{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _Sheet = require('./Sheet');\n\nvar _Sheet2 = _interopRequireDefault(_Sheet);\n\nvar _Row = require('./Row');\n\nvar _Row2 = _interopRequireDefault(_Row);\n\nvar _Cell = require('./Cell');\n\nvar _Cell2 = _interopRequireDefault(_Cell);\n\nvar _DataCell = require('./DataCell');\n\nvar _DataCell2 = _interopRequireDefault(_DataCell);\n\nvar _DataEditor = require('./DataEditor');\n\nvar _DataEditor2 = _interopRequireDefault(_DataEditor);\n\nvar _ValueViewer = require('./ValueViewer');\n\nvar _ValueViewer2 = _interopRequireDefault(_ValueViewer);\n\nvar _keys = require('./keys');\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _objectWithoutProperties(obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar isEmpty = function isEmpty(obj) {\n  return Object.keys(obj).length === 0;\n};\n\nvar range = function range(start, end) {\n  var array = [];\n  var inc = end - start > 0;\n\n  for (var i = start; inc ? i <= end : i >= end; inc ? i++ : i--) {\n    inc ? array.push(i) : array.unshift(i);\n  }\n\n  return array;\n};\n\nvar defaultParsePaste = function defaultParsePaste(str) {\n  return str.split(/\\r\\n|\\n|\\r/).map(function (row) {\n    return row.split('\\t');\n  });\n};\n\nvar DataSheet = function (_PureComponent) {\n  _inherits(DataSheet, _PureComponent);\n\n  function DataSheet(props) {\n    _classCallCheck(this, DataSheet);\n\n    var _this = _possibleConstructorReturn(this, (DataSheet.__proto__ || Object.getPrototypeOf(DataSheet)).call(this, props));\n\n    _this.onMouseDown = _this.onMouseDown.bind(_this);\n    _this.onMouseUp = _this.onMouseUp.bind(_this);\n    _this.onMouseOver = _this.onMouseOver.bind(_this);\n    _this.onDoubleClick = _this.onDoubleClick.bind(_this);\n    _this.onContextMenu = _this.onContextMenu.bind(_this);\n    _this.handleNavigate = _this.handleNavigate.bind(_this);\n    _this.handleKey = _this.handleKey.bind(_this).bind(_this);\n    _this.handleCut = _this.handleCut.bind(_this);\n    _this.handleCopy = _this.handleCopy.bind(_this);\n    _this.handlePaste = _this.handlePaste.bind(_this);\n    _this.pageClick = _this.pageClick.bind(_this);\n    _this.onChange = _this.onChange.bind(_this);\n    _this.onRevert = _this.onRevert.bind(_this);\n    _this.isSelected = _this.isSelected.bind(_this);\n    _this.isEditing = _this.isEditing.bind(_this);\n    _this.isClearing = _this.isClearing.bind(_this);\n    _this.handleComponentKey = _this.handleComponentKey.bind(_this);\n    _this.handleKeyboardCellMovement = _this.handleKeyboardCellMovement.bind(_this);\n    _this.defaultState = {\n      start: {},\n      end: {},\n      selecting: false,\n      forceEdit: false,\n      editing: {},\n      clear: {}\n    };\n    _this.state = _this.defaultState;\n    _this.removeAllListeners = _this.removeAllListeners.bind(_this);\n    _this.handleIEClipboardEvents = _this.handleIEClipboardEvents.bind(_this);\n    return _this;\n  }\n\n  _createClass(DataSheet, [{\n    key: 'removeAllListeners',\n    value: function removeAllListeners() {\n      document.removeEventListener('mousedown', this.pageClick);\n      document.removeEventListener('mouseup', this.onMouseUp);\n      document.removeEventListener('cut', this.handleCut);\n      document.removeEventListener('copy', this.handleCopy);\n      document.removeEventListener('paste', this.handlePaste);\n      document.removeEventListener('keydown', this.handleIEClipboardEvents);\n    }\n  }, {\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      // Add listener scoped to the DataSheet that catches otherwise unhandled\n      // keyboard events when displaying components\n      this.dgDom && this.dgDom.addEventListener('keydown', this.handleComponentKey);\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      this.dgDom && this.dgDom.removeEventListener('keydown', this.handleComponentKey);\n      this.removeAllListeners();\n    }\n  }, {\n    key: 'isSelectionControlled',\n    value: function isSelectionControlled() {\n      return 'selected' in this.props;\n    }\n  }, {\n    key: 'getState',\n    value: function getState() {\n      var state = this.state;\n\n      if (this.isSelectionControlled()) {\n        var _ref = this.props.selected || {},\n            start = _ref.start,\n            end = _ref.end;\n\n        start = start || this.defaultState.start;\n        end = end || this.defaultState.end;\n        state = _extends({}, state, {\n          start: start,\n          end: end\n        });\n      }\n\n      return state;\n    }\n  }, {\n    key: '_setState',\n    value: function _setState(state) {\n      if (this.isSelectionControlled() && ('start' in state || 'end' in state)) {\n        var start = state.start,\n            end = state.end,\n            rest = _objectWithoutProperties(state, ['start', 'end']);\n\n        var _props = this.props,\n            selected = _props.selected,\n            onSelect = _props.onSelect;\n        selected = selected || {};\n\n        if (!start) {\n          start = 'start' in selected ? selected.start : this.defaultState.start;\n        }\n\n        if (!end) {\n          end = 'end' in selected ? selected.end : this.defaultState.end;\n        }\n\n        onSelect && onSelect({\n          start: start,\n          end: end\n        });\n        this.setState(rest);\n      } else {\n        this.setState(state);\n      }\n    }\n  }, {\n    key: 'pageClick',\n    value: function pageClick(e) {\n      if (this.props.disablePageClick) return;\n      var element = this.dgDom;\n\n      if (!element.contains(e.target)) {\n        this.setState(this.defaultState);\n        this.removeAllListeners();\n      }\n    }\n  }, {\n    key: 'handleCut',\n    value: function handleCut(e) {\n      if (isEmpty(this.state.editing)) {\n        e.preventDefault();\n        this.handleCopy(e);\n\n        var _getState = this.getState(),\n            start = _getState.start,\n            end = _getState.end;\n\n        this.clearSelectedCells(start, end);\n      }\n    }\n  }, {\n    key: 'handleIEClipboardEvents',\n    value: function handleIEClipboardEvents(e) {\n      if (e.ctrlKey) {\n        if (e.keyCode === 67) {\n          // C - copy\n          this.handleCopy(e);\n        } else if (e.keyCode === 88) {\n          // X - cut\n          this.handleCut(e);\n        } else if (e.keyCode === 86 || e.which === 86) {\n          // P - patse\n          this.handlePaste(e);\n        }\n      }\n    }\n  }, {\n    key: 'handleCopy',\n    value: function handleCopy(e) {\n      if (isEmpty(this.state.editing)) {\n        e.preventDefault();\n        var _props2 = this.props,\n            dataRenderer = _props2.dataRenderer,\n            valueRenderer = _props2.valueRenderer,\n            data = _props2.data;\n\n        var _getState2 = this.getState(),\n            start = _getState2.start,\n            end = _getState2.end;\n\n        if (this.props.handleCopy) {\n          this.props.handleCopy({\n            event: e,\n            dataRenderer: dataRenderer,\n            valueRenderer: valueRenderer,\n            data: data,\n            start: start,\n            end: end,\n            range: range\n          });\n        } else {\n          var text = range(start.i, end.i).map(function (i) {\n            return range(start.j, end.j).map(function (j) {\n              var cell = data[i][j];\n              var value = dataRenderer ? dataRenderer(cell, i, j) : null;\n\n              if (value === '' || value === null || typeof value === 'undefined') {\n                return valueRenderer(cell, i, j);\n              }\n\n              return value;\n            }).join('\\t');\n          }).join('\\n');\n\n          if (window.clipboardData && window.clipboardData.setData) {\n            window.clipboardData.setData('Text', text);\n          } else {\n            e.clipboardData.setData('text/plain', text);\n          }\n        }\n      }\n    }\n  }, {\n    key: 'handlePaste',\n    value: function handlePaste(e) {\n      if (isEmpty(this.state.editing)) {\n        var _getState3 = this.getState(),\n            start = _getState3.start,\n            end = _getState3.end;\n\n        start = {\n          i: Math.min(start.i, end.i),\n          j: Math.min(start.j, end.j)\n        };\n        end = {\n          i: Math.max(start.i, end.i),\n          j: Math.max(start.j, end.j)\n        };\n        var parse = this.props.parsePaste || defaultParsePaste;\n        var changes = [];\n        var pasteData = [];\n\n        if (window.clipboardData && window.clipboardData.getData) {\n          // IE\n          pasteData = parse(window.clipboardData.getData('Text'));\n        } else if (e.clipboardData && e.clipboardData.getData) {\n          pasteData = parse(e.clipboardData.getData('text/plain'));\n        } // in order of preference\n\n\n        var _props3 = this.props,\n            data = _props3.data,\n            onCellsChanged = _props3.onCellsChanged,\n            onPaste = _props3.onPaste,\n            onChange = _props3.onChange;\n\n        if (onCellsChanged) {\n          var additions = [];\n          pasteData.forEach(function (row, i) {\n            row.forEach(function (value, j) {\n              end = {\n                i: start.i + i,\n                j: start.j + j\n              };\n              var cell = data[end.i] && data[end.i][end.j];\n\n              if (!cell) {\n                additions.push({\n                  row: end.i,\n                  col: end.j,\n                  value: value\n                });\n              } else if (!cell.readOnly) {\n                changes.push({\n                  cell: cell,\n                  row: end.i,\n                  col: end.j,\n                  value: value\n                });\n              }\n            });\n          });\n\n          if (additions.length) {\n            onCellsChanged(changes, additions);\n          } else {\n            onCellsChanged(changes);\n          }\n        } else if (onPaste) {\n          pasteData.forEach(function (row, i) {\n            var rowData = [];\n            row.forEach(function (pastedData, j) {\n              end = {\n                i: start.i + i,\n                j: start.j + j\n              };\n              var cell = data[end.i] && data[end.i][end.j];\n              rowData.push({\n                cell: cell,\n                data: pastedData\n              });\n            });\n            changes.push(rowData);\n          });\n          onPaste(changes);\n        } else if (onChange) {\n          pasteData.forEach(function (row, i) {\n            row.forEach(function (value, j) {\n              end = {\n                i: start.i + i,\n                j: start.j + j\n              };\n              var cell = data[end.i] && data[end.i][end.j];\n\n              if (cell && !cell.readOnly) {\n                onChange(cell, end.i, end.j, value);\n              }\n            });\n          });\n        }\n\n        this._setState({\n          end: end\n        });\n      }\n    }\n  }, {\n    key: 'handleKeyboardCellMovement',\n    value: function handleKeyboardCellMovement(e) {\n      var commit = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n      var _getState4 = this.getState(),\n          start = _getState4.start,\n          editing = _getState4.editing;\n\n      var data = this.props.data;\n      var isEditing = editing && !isEmpty(editing);\n      var currentCell = data[start.i] && data[start.i][start.j];\n\n      if (isEditing && !commit) {\n        return false;\n      }\n\n      var hasComponent = currentCell && currentCell.component;\n      var keyCode = e.which || e.keyCode;\n\n      if (hasComponent && isEditing) {\n        e.preventDefault();\n        return;\n      }\n\n      if (keyCode === _keys.TAB_KEY) {\n        this.handleNavigate(e, {\n          i: 0,\n          j: e.shiftKey ? -1 : 1\n        }, true);\n      } else if (keyCode === _keys.RIGHT_KEY) {\n        this.handleNavigate(e, {\n          i: 0,\n          j: 1\n        });\n      } else if (keyCode === _keys.LEFT_KEY) {\n        this.handleNavigate(e, {\n          i: 0,\n          j: -1\n        });\n      } else if (keyCode === _keys.UP_KEY) {\n        this.handleNavigate(e, {\n          i: -1,\n          j: 0\n        });\n      } else if (keyCode === _keys.DOWN_KEY) {\n        this.handleNavigate(e, {\n          i: 1,\n          j: 0\n        });\n      } else if (commit && keyCode === _keys.ENTER_KEY) {\n        this.handleNavigate(e, {\n          i: e.shiftKey ? -1 : 1,\n          j: 0\n        });\n      }\n    }\n  }, {\n    key: 'handleKey',\n    value: function handleKey(e) {\n      if (e.isPropagationStopped && e.isPropagationStopped()) {\n        return;\n      }\n\n      var keyCode = e.which || e.keyCode;\n\n      var _getState5 = this.getState(),\n          start = _getState5.start,\n          end = _getState5.end,\n          editing = _getState5.editing;\n\n      var isEditing = editing && !isEmpty(editing);\n      var noCellsSelected = !start || isEmpty(start);\n      var ctrlKeyPressed = e.ctrlKey || e.metaKey;\n      var deleteKeysPressed = keyCode === _keys.DELETE_KEY || keyCode === _keys.BACKSPACE_KEY;\n      var enterKeyPressed = keyCode === _keys.ENTER_KEY;\n      var numbersPressed = keyCode >= 48 && keyCode <= 57;\n      var lettersPressed = keyCode >= 65 && keyCode <= 90;\n      var latin1Supplement = keyCode >= 160 && keyCode <= 255;\n      var numPadKeysPressed = keyCode >= 96 && keyCode <= 105;\n      var currentCell = !noCellsSelected && this.props.data[start.i][start.j];\n      var equationKeysPressed = [187\n      /* equal */\n      , 189\n      /* substract */\n      , 190\n      /* period */\n      , 107\n      /* add */\n      , 109\n      /* decimal point */\n      , 110].indexOf(keyCode) > -1;\n\n      if (noCellsSelected || ctrlKeyPressed) {\n        return true;\n      }\n\n      if (!isEditing) {\n        this.handleKeyboardCellMovement(e);\n\n        if (deleteKeysPressed) {\n          e.preventDefault();\n          this.clearSelectedCells(start, end);\n        } else if (currentCell && !currentCell.readOnly) {\n          if (enterKeyPressed) {\n            this._setState({\n              editing: start,\n              clear: {},\n              forceEdit: true\n            });\n\n            e.preventDefault();\n          } else if (numbersPressed || numPadKeysPressed || lettersPressed || latin1Supplement || equationKeysPressed) {\n            // empty out cell if user starts typing without pressing enter\n            this._setState({\n              editing: start,\n              clear: start,\n              forceEdit: false\n            });\n          }\n        }\n      }\n    }\n  }, {\n    key: 'getSelectedCells',\n    value: function getSelectedCells(data, start, end) {\n      var selected = [];\n      range(start.i, end.i).map(function (row) {\n        range(start.j, end.j).map(function (col) {\n          if (data[row] && data[row][col]) {\n            selected.push({\n              cell: data[row][col],\n              row: row,\n              col: col\n            });\n          }\n        });\n      });\n      return selected;\n    }\n  }, {\n    key: 'clearSelectedCells',\n    value: function clearSelectedCells(start, end) {\n      var _this2 = this;\n\n      var _props4 = this.props,\n          data = _props4.data,\n          onCellsChanged = _props4.onCellsChanged,\n          onChange = _props4.onChange;\n      var cells = this.getSelectedCells(data, start, end).filter(function (cell) {\n        return !cell.cell.readOnly;\n      }).map(function (cell) {\n        return _extends({}, cell, {\n          value: ''\n        });\n      });\n\n      if (onCellsChanged) {\n        onCellsChanged(cells);\n        this.onRevert();\n      } else if (onChange) {\n        // ugly solution brought to you by https://reactjs.org/docs/react-component.html#setstate\n        // setState in a loop is unreliable\n        setTimeout(function () {\n          cells.forEach(function (_ref2) {\n            var cell = _ref2.cell,\n                row = _ref2.row,\n                col = _ref2.col,\n                value = _ref2.value;\n            onChange(cell, row, col, value);\n          });\n\n          _this2.onRevert();\n        }, 0);\n      }\n    }\n  }, {\n    key: 'updateLocationSingleCell',\n    value: function updateLocationSingleCell(location) {\n      this._setState({\n        start: location,\n        end: location,\n        editing: {}\n      });\n    }\n  }, {\n    key: 'updateLocationMultipleCells',\n    value: function updateLocationMultipleCells(offsets) {\n      var _getState6 = this.getState(),\n          start = _getState6.start,\n          end = _getState6.end;\n\n      var data = this.props.data;\n      var oldStartLocation = {\n        i: start.i,\n        j: start.j\n      };\n      var newEndLocation = {\n        i: end.i + offsets.i,\n        j: Math.min(data[0].length - 1, Math.max(0, end.j + offsets.j))\n      };\n\n      this._setState({\n        start: oldStartLocation,\n        end: newEndLocation,\n        editing: {}\n      });\n    }\n  }, {\n    key: 'searchForNextSelectablePos',\n    value: function searchForNextSelectablePos(isCellNavigable, data, start, offsets, jumpRow) {\n      var previousRow = function previousRow(location) {\n        return {\n          i: location.i - 1,\n          j: data[0].length - 1\n        };\n      };\n\n      var nextRow = function nextRow(location) {\n        return {\n          i: location.i + 1,\n          j: 0\n        };\n      };\n\n      var advanceOffset = function advanceOffset(location) {\n        return {\n          i: location.i + offsets.i,\n          j: location.j + offsets.j\n        };\n      };\n\n      var isCellDefined = function isCellDefined(_ref3) {\n        var i = _ref3.i,\n            j = _ref3.j;\n        return data[i] && typeof data[i][j] !== 'undefined';\n      };\n\n      var newLocation = advanceOffset(start);\n\n      while (isCellDefined(newLocation) && !isCellNavigable(data[newLocation.i][newLocation.j], newLocation.i, newLocation.j)) {\n        newLocation = advanceOffset(newLocation);\n      }\n\n      if (!isCellDefined(newLocation)) {\n        if (!jumpRow) {\n          return null;\n        }\n\n        if (offsets.j < 0) {\n          newLocation = previousRow(newLocation);\n        } else {\n          newLocation = nextRow(newLocation);\n        }\n      }\n\n      if (isCellDefined(newLocation) && !isCellNavigable(data[newLocation.i][newLocation.j], newLocation.i, newLocation.j)) {\n        return this.searchForNextSelectablePos(isCellNavigable, data, newLocation, offsets, jumpRow);\n      } else if (isCellDefined(newLocation)) {\n        return newLocation;\n      } else {\n        return null;\n      }\n    }\n  }, {\n    key: 'handleNavigate',\n    value: function handleNavigate(e, offsets, jumpRow) {\n      if (offsets && (offsets.i || offsets.j)) {\n        var data = this.props.data;\n\n        var _getState7 = this.getState(),\n            start = _getState7.start;\n\n        var multiSelect = e.shiftKey && !jumpRow;\n        var isCellNavigable = this.props.isCellNavigable ? this.props.isCellNavigable : function () {\n          return true;\n        };\n\n        if (multiSelect) {\n          this.updateLocationMultipleCells(offsets);\n        } else {\n          var newLocation = this.searchForNextSelectablePos(isCellNavigable, data, start, offsets, jumpRow);\n\n          if (newLocation) {\n            this.updateLocationSingleCell(newLocation);\n          }\n        }\n\n        e.preventDefault();\n      }\n    }\n  }, {\n    key: 'handleComponentKey',\n    value: function handleComponentKey(e) {\n      var _this3 = this; // handles keyboard events when editing components\n\n\n      var keyCode = e.which || e.keyCode;\n\n      if (![_keys.ENTER_KEY, _keys.ESCAPE_KEY, _keys.TAB_KEY].includes(keyCode)) {\n        return;\n      }\n\n      var editing = this.state.editing;\n      var data = this.props.data;\n      var isEditing = !isEmpty(editing);\n\n      if (isEditing) {\n        var currentCell = data[editing.i][editing.j];\n        var offset = e.shiftKey ? -1 : 1;\n\n        if (currentCell && currentCell.component && !currentCell.forceComponent) {\n          e.preventDefault();\n          var func = this.onRevert; // ESCAPE_KEY\n\n          if (keyCode === _keys.ENTER_KEY) {\n            func = function func() {\n              return _this3.handleNavigate(e, {\n                i: offset,\n                j: 0\n              });\n            };\n          } else if (keyCode === _keys.TAB_KEY) {\n            func = function func() {\n              return _this3.handleNavigate(e, {\n                i: 0,\n                j: offset\n              }, true);\n            };\n          } // setTimeout makes sure that component is done handling the event before we take over\n\n\n          setTimeout(function () {\n            func();\n            _this3.dgDom && _this3.dgDom.focus({\n              preventScroll: true\n            });\n          }, 1);\n        }\n      }\n    }\n  }, {\n    key: 'onContextMenu',\n    value: function onContextMenu(evt, i, j) {\n      var cell = this.props.data[i][j];\n\n      if (this.props.onContextMenu) {\n        this.props.onContextMenu(evt, cell, i, j);\n      }\n    }\n  }, {\n    key: 'onDoubleClick',\n    value: function onDoubleClick(i, j) {\n      var cell = this.props.data[i][j];\n\n      if (!cell.readOnly) {\n        this._setState({\n          editing: {\n            i: i,\n            j: j\n          },\n          forceEdit: true,\n          clear: {}\n        });\n      }\n    }\n  }, {\n    key: 'onMouseDown',\n    value: function onMouseDown(i, j, e) {\n      var isNowEditingSameCell = !isEmpty(this.state.editing) && this.state.editing.i === i && this.state.editing.j === j;\n      var editing = isEmpty(this.state.editing) || this.state.editing.i !== i || this.state.editing.j !== j ? {} : this.state.editing;\n\n      this._setState({\n        selecting: !isNowEditingSameCell,\n        start: e.shiftKey ? this.state.start : {\n          i: i,\n          j: j\n        },\n        end: {\n          i: i,\n          j: j\n        },\n        editing: editing,\n        forceEdit: !!isNowEditingSameCell\n      });\n\n      var ua = window.navigator.userAgent;\n      var isIE = /MSIE|Trident/.test(ua); // Listen for Ctrl + V in case of IE\n\n      if (isIE) {\n        document.addEventListener('keydown', this.handleIEClipboardEvents);\n      } // Keep listening to mouse if user releases the mouse (dragging outside)\n\n\n      document.addEventListener('mouseup', this.onMouseUp); // Listen for any outside mouse clicks\n\n      document.addEventListener('mousedown', this.pageClick); // Cut, copy and paste event handlers\n\n      document.addEventListener('cut', this.handleCut);\n      document.addEventListener('copy', this.handleCopy);\n      document.addEventListener('paste', this.handlePaste);\n    }\n  }, {\n    key: 'onMouseOver',\n    value: function onMouseOver(i, j) {\n      if (this.state.selecting && isEmpty(this.state.editing)) {\n        this._setState({\n          end: {\n            i: i,\n            j: j\n          }\n        });\n      }\n    }\n  }, {\n    key: 'onMouseUp',\n    value: function onMouseUp() {\n      this._setState({\n        selecting: false\n      });\n\n      document.removeEventListener('mouseup', this.onMouseUp);\n    }\n  }, {\n    key: 'onChange',\n    value: function onChange(row, col, value) {\n      var _props5 = this.props,\n          onChange = _props5.onChange,\n          onCellsChanged = _props5.onCellsChanged,\n          data = _props5.data;\n\n      if (onCellsChanged) {\n        onCellsChanged([{\n          cell: data[row][col],\n          row: row,\n          col: col,\n          value: value\n        }]);\n      } else if (onChange) {\n        onChange(data[row][col], row, col, value);\n      }\n\n      this.onRevert();\n    }\n  }, {\n    key: 'onRevert',\n    value: function onRevert() {\n      this._setState({\n        editing: {}\n      });\n\n      this.dgDom && this.dgDom.focus({\n        preventScroll: true\n      });\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate(prevProps, prevState) {\n      var _state = this.state,\n          start = _state.start,\n          end = _state.end;\n      var prevEnd = prevState.end;\n\n      if (!isEmpty(end) && !(end.i === prevEnd.i && end.j === prevEnd.j) && !this.isSelectionControlled()) {\n        this.props.onSelect && this.props.onSelect({\n          start: start,\n          end: end\n        });\n      }\n    }\n  }, {\n    key: 'isSelected',\n    value: function isSelected(i, j) {\n      var _getState8 = this.getState(),\n          start = _getState8.start,\n          end = _getState8.end;\n\n      var posX = j >= start.j && j <= end.j;\n      var negX = j <= start.j && j >= end.j;\n      var posY = i >= start.i && i <= end.i;\n      var negY = i <= start.i && i >= end.i;\n      return posX && posY || negX && posY || negX && negY || posX && negY;\n    }\n  }, {\n    key: 'isEditing',\n    value: function isEditing(i, j) {\n      return this.state.editing.i === i && this.state.editing.j === j;\n    }\n  }, {\n    key: 'isClearing',\n    value: function isClearing(i, j) {\n      return this.state.clear.i === i && this.state.clear.j === j;\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this4 = this;\n\n      var _props6 = this.props,\n          SheetRenderer = _props6.sheetRenderer,\n          RowRenderer = _props6.rowRenderer,\n          cellRenderer = _props6.cellRenderer,\n          dataRenderer = _props6.dataRenderer,\n          valueRenderer = _props6.valueRenderer,\n          dataEditor = _props6.dataEditor,\n          valueViewer = _props6.valueViewer,\n          attributesRenderer = _props6.attributesRenderer,\n          className = _props6.className,\n          overflow = _props6.overflow,\n          data = _props6.data,\n          keyFn = _props6.keyFn;\n      var forceEdit = this.state.forceEdit;\n      return _react2.default.createElement('span', {\n        ref: function ref(r) {\n          _this4.dgDom = r;\n        },\n        tabIndex: '0',\n        className: 'data-grid-container',\n        onKeyDown: this.handleKey\n      }, _react2.default.createElement(SheetRenderer, {\n        data: data,\n        className: ['data-grid', className, overflow].filter(function (a) {\n          return a;\n        }).join(' ')\n      }, data.map(function (row, i) {\n        return _react2.default.createElement(RowRenderer, {\n          key: keyFn ? keyFn(i) : i,\n          row: i,\n          cells: row\n        }, row.map(function (cell, j) {\n          var isEditing = _this4.isEditing(i, j);\n\n          return _react2.default.createElement(_DataCell2.default, _extends({\n            key: cell.key ? cell.key : i + '-' + j,\n            row: i,\n            col: j,\n            cell: cell,\n            forceEdit: false,\n            onMouseDown: _this4.onMouseDown,\n            onMouseOver: _this4.onMouseOver,\n            onDoubleClick: _this4.onDoubleClick,\n            onContextMenu: _this4.onContextMenu,\n            onChange: _this4.onChange,\n            onRevert: _this4.onRevert,\n            onNavigate: _this4.handleKeyboardCellMovement,\n            onKey: _this4.handleKey,\n            selected: _this4.isSelected(i, j),\n            editing: isEditing,\n            clearing: _this4.isClearing(i, j),\n            attributesRenderer: attributesRenderer,\n            cellRenderer: cellRenderer,\n            valueRenderer: valueRenderer,\n            dataRenderer: dataRenderer,\n            valueViewer: valueViewer,\n            dataEditor: dataEditor\n          }, isEditing ? {\n            forceEdit: forceEdit\n          } : {}));\n        }));\n      })));\n    }\n  }]);\n\n  return DataSheet;\n}(_react.PureComponent);\n\nexports.default = DataSheet;\nDataSheet.propTypes = {\n  data: _propTypes2.default.array.isRequired,\n  className: _propTypes2.default.string,\n  disablePageClick: _propTypes2.default.bool,\n  overflow: _propTypes2.default.oneOf(['wrap', 'nowrap', 'clip']),\n  onChange: _propTypes2.default.func,\n  onCellsChanged: _propTypes2.default.func,\n  onContextMenu: _propTypes2.default.func,\n  onSelect: _propTypes2.default.func,\n  isCellNavigable: _propTypes2.default.func,\n  selected: _propTypes2.default.shape({\n    start: _propTypes2.default.shape({\n      i: _propTypes2.default.number,\n      j: _propTypes2.default.number\n    }),\n    end: _propTypes2.default.shape({\n      i: _propTypes2.default.number,\n      j: _propTypes2.default.number\n    })\n  }),\n  valueRenderer: _propTypes2.default.func.isRequired,\n  dataRenderer: _propTypes2.default.func,\n  sheetRenderer: _propTypes2.default.func.isRequired,\n  rowRenderer: _propTypes2.default.func.isRequired,\n  cellRenderer: _propTypes2.default.func.isRequired,\n  valueViewer: _propTypes2.default.func,\n  dataEditor: _propTypes2.default.func,\n  parsePaste: _propTypes2.default.func,\n  attributesRenderer: _propTypes2.default.func,\n  keyFn: _propTypes2.default.func,\n  handleCopy: _propTypes2.default.func\n};\nDataSheet.defaultProps = {\n  sheetRenderer: _Sheet2.default,\n  rowRenderer: _Row2.default,\n  cellRenderer: _Cell2.default,\n  valueViewer: _ValueViewer2.default,\n  dataEditor: _DataEditor2.default\n};","map":{"version":3,"sources":["C:/Users/vincent/git/playground/node_modules/react-datasheet/lib/DataSheet.js"],"names":["Object","defineProperty","exports","value","_extends","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_createClass","defineProperties","props","descriptor","enumerable","configurable","writable","Constructor","protoProps","staticProps","_react","require","_react2","_interopRequireDefault","_propTypes","_propTypes2","_Sheet","_Sheet2","_Row","_Row2","_Cell","_Cell2","_DataCell","_DataCell2","_DataEditor","_DataEditor2","_ValueViewer","_ValueViewer2","_keys","obj","__esModule","default","_objectWithoutProperties","keys","indexOf","_classCallCheck","instance","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","isEmpty","range","start","end","array","inc","push","unshift","defaultParsePaste","str","split","map","row","DataSheet","_PureComponent","_this","getPrototypeOf","onMouseDown","bind","onMouseUp","onMouseOver","onDoubleClick","onContextMenu","handleNavigate","handleKey","handleCut","handleCopy","handlePaste","pageClick","onChange","onRevert","isSelected","isEditing","isClearing","handleComponentKey","handleKeyboardCellMovement","defaultState","selecting","forceEdit","editing","clear","state","removeAllListeners","handleIEClipboardEvents","document","removeEventListener","componentDidMount","dgDom","addEventListener","componentWillUnmount","isSelectionControlled","getState","_ref","selected","_setState","rest","_props","onSelect","setState","e","disablePageClick","element","contains","preventDefault","_getState","clearSelectedCells","ctrlKey","keyCode","which","_props2","dataRenderer","valueRenderer","data","_getState2","event","text","j","cell","join","window","clipboardData","setData","_getState3","Math","min","max","parse","parsePaste","changes","pasteData","getData","_props3","onCellsChanged","onPaste","additions","forEach","col","readOnly","rowData","pastedData","commit","undefined","_getState4","currentCell","hasComponent","component","TAB_KEY","shiftKey","RIGHT_KEY","LEFT_KEY","UP_KEY","DOWN_KEY","ENTER_KEY","isPropagationStopped","_getState5","noCellsSelected","ctrlKeyPressed","metaKey","deleteKeysPressed","DELETE_KEY","BACKSPACE_KEY","enterKeyPressed","numbersPressed","lettersPressed","latin1Supplement","numPadKeysPressed","equationKeysPressed","getSelectedCells","_this2","_props4","cells","filter","setTimeout","_ref2","updateLocationSingleCell","location","updateLocationMultipleCells","offsets","_getState6","oldStartLocation","newEndLocation","searchForNextSelectablePos","isCellNavigable","jumpRow","previousRow","nextRow","advanceOffset","isCellDefined","_ref3","newLocation","_getState7","multiSelect","_this3","ESCAPE_KEY","includes","offset","forceComponent","func","focus","preventScroll","evt","isNowEditingSameCell","ua","navigator","userAgent","isIE","test","_props5","componentDidUpdate","prevProps","prevState","_state","prevEnd","_getState8","posX","negX","posY","negY","render","_this4","_props6","SheetRenderer","sheetRenderer","RowRenderer","rowRenderer","cellRenderer","dataEditor","valueViewer","attributesRenderer","className","overflow","keyFn","createElement","ref","r","tabIndex","onKeyDown","a","onNavigate","onKey","clearing","PureComponent","propTypes","isRequired","string","bool","oneOf","shape","number","defaultProps"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _Sheet = require('./Sheet');\n\nvar _Sheet2 = _interopRequireDefault(_Sheet);\n\nvar _Row = require('./Row');\n\nvar _Row2 = _interopRequireDefault(_Row);\n\nvar _Cell = require('./Cell');\n\nvar _Cell2 = _interopRequireDefault(_Cell);\n\nvar _DataCell = require('./DataCell');\n\nvar _DataCell2 = _interopRequireDefault(_DataCell);\n\nvar _DataEditor = require('./DataEditor');\n\nvar _DataEditor2 = _interopRequireDefault(_DataEditor);\n\nvar _ValueViewer = require('./ValueViewer');\n\nvar _ValueViewer2 = _interopRequireDefault(_ValueViewer);\n\nvar _keys = require('./keys');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar isEmpty = function isEmpty(obj) {\n  return Object.keys(obj).length === 0;\n};\n\nvar range = function range(start, end) {\n  var array = [];\n  var inc = end - start > 0;\n  for (var i = start; inc ? i <= end : i >= end; inc ? i++ : i--) {\n    inc ? array.push(i) : array.unshift(i);\n  }\n  return array;\n};\n\nvar defaultParsePaste = function defaultParsePaste(str) {\n  return str.split(/\\r\\n|\\n|\\r/).map(function (row) {\n    return row.split('\\t');\n  });\n};\n\nvar DataSheet = function (_PureComponent) {\n  _inherits(DataSheet, _PureComponent);\n\n  function DataSheet(props) {\n    _classCallCheck(this, DataSheet);\n\n    var _this = _possibleConstructorReturn(this, (DataSheet.__proto__ || Object.getPrototypeOf(DataSheet)).call(this, props));\n\n    _this.onMouseDown = _this.onMouseDown.bind(_this);\n    _this.onMouseUp = _this.onMouseUp.bind(_this);\n    _this.onMouseOver = _this.onMouseOver.bind(_this);\n    _this.onDoubleClick = _this.onDoubleClick.bind(_this);\n    _this.onContextMenu = _this.onContextMenu.bind(_this);\n    _this.handleNavigate = _this.handleNavigate.bind(_this);\n    _this.handleKey = _this.handleKey.bind(_this).bind(_this);\n    _this.handleCut = _this.handleCut.bind(_this);\n    _this.handleCopy = _this.handleCopy.bind(_this);\n    _this.handlePaste = _this.handlePaste.bind(_this);\n    _this.pageClick = _this.pageClick.bind(_this);\n    _this.onChange = _this.onChange.bind(_this);\n    _this.onRevert = _this.onRevert.bind(_this);\n    _this.isSelected = _this.isSelected.bind(_this);\n    _this.isEditing = _this.isEditing.bind(_this);\n    _this.isClearing = _this.isClearing.bind(_this);\n    _this.handleComponentKey = _this.handleComponentKey.bind(_this);\n\n    _this.handleKeyboardCellMovement = _this.handleKeyboardCellMovement.bind(_this);\n\n    _this.defaultState = {\n      start: {},\n      end: {},\n      selecting: false,\n      forceEdit: false,\n      editing: {},\n      clear: {}\n    };\n    _this.state = _this.defaultState;\n\n    _this.removeAllListeners = _this.removeAllListeners.bind(_this);\n    _this.handleIEClipboardEvents = _this.handleIEClipboardEvents.bind(_this);\n    return _this;\n  }\n\n  _createClass(DataSheet, [{\n    key: 'removeAllListeners',\n    value: function removeAllListeners() {\n      document.removeEventListener('mousedown', this.pageClick);\n      document.removeEventListener('mouseup', this.onMouseUp);\n      document.removeEventListener('cut', this.handleCut);\n      document.removeEventListener('copy', this.handleCopy);\n      document.removeEventListener('paste', this.handlePaste);\n      document.removeEventListener('keydown', this.handleIEClipboardEvents);\n    }\n  }, {\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      // Add listener scoped to the DataSheet that catches otherwise unhandled\n      // keyboard events when displaying components\n      this.dgDom && this.dgDom.addEventListener('keydown', this.handleComponentKey);\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      this.dgDom && this.dgDom.removeEventListener('keydown', this.handleComponentKey);\n      this.removeAllListeners();\n    }\n  }, {\n    key: 'isSelectionControlled',\n    value: function isSelectionControlled() {\n      return 'selected' in this.props;\n    }\n  }, {\n    key: 'getState',\n    value: function getState() {\n      var state = this.state;\n      if (this.isSelectionControlled()) {\n        var _ref = this.props.selected || {},\n            start = _ref.start,\n            end = _ref.end;\n\n        start = start || this.defaultState.start;\n        end = end || this.defaultState.end;\n        state = _extends({}, state, { start: start, end: end });\n      }\n      return state;\n    }\n  }, {\n    key: '_setState',\n    value: function _setState(state) {\n      if (this.isSelectionControlled() && ('start' in state || 'end' in state)) {\n        var start = state.start,\n            end = state.end,\n            rest = _objectWithoutProperties(state, ['start', 'end']);\n\n        var _props = this.props,\n            selected = _props.selected,\n            onSelect = _props.onSelect;\n\n        selected = selected || {};\n        if (!start) {\n          start = 'start' in selected ? selected.start : this.defaultState.start;\n        }\n        if (!end) {\n          end = 'end' in selected ? selected.end : this.defaultState.end;\n        }\n        onSelect && onSelect({ start: start, end: end });\n        this.setState(rest);\n      } else {\n        this.setState(state);\n      }\n    }\n  }, {\n    key: 'pageClick',\n    value: function pageClick(e) {\n      if (this.props.disablePageClick) return;\n      var element = this.dgDom;\n      if (!element.contains(e.target)) {\n        this.setState(this.defaultState);\n        this.removeAllListeners();\n      }\n    }\n  }, {\n    key: 'handleCut',\n    value: function handleCut(e) {\n      if (isEmpty(this.state.editing)) {\n        e.preventDefault();\n        this.handleCopy(e);\n\n        var _getState = this.getState(),\n            start = _getState.start,\n            end = _getState.end;\n\n        this.clearSelectedCells(start, end);\n      }\n    }\n  }, {\n    key: 'handleIEClipboardEvents',\n    value: function handleIEClipboardEvents(e) {\n      if (e.ctrlKey) {\n        if (e.keyCode === 67) {\n          // C - copy\n          this.handleCopy(e);\n        } else if (e.keyCode === 88) {\n          // X - cut\n          this.handleCut(e);\n        } else if (e.keyCode === 86 || e.which === 86) {\n          // P - patse\n          this.handlePaste(e);\n        }\n      }\n    }\n  }, {\n    key: 'handleCopy',\n    value: function handleCopy(e) {\n      if (isEmpty(this.state.editing)) {\n        e.preventDefault();\n        var _props2 = this.props,\n            dataRenderer = _props2.dataRenderer,\n            valueRenderer = _props2.valueRenderer,\n            data = _props2.data;\n\n        var _getState2 = this.getState(),\n            start = _getState2.start,\n            end = _getState2.end;\n\n        if (this.props.handleCopy) {\n          this.props.handleCopy({\n            event: e,\n            dataRenderer: dataRenderer,\n            valueRenderer: valueRenderer,\n            data: data,\n            start: start,\n            end: end,\n            range: range\n          });\n        } else {\n          var text = range(start.i, end.i).map(function (i) {\n            return range(start.j, end.j).map(function (j) {\n              var cell = data[i][j];\n              var value = dataRenderer ? dataRenderer(cell, i, j) : null;\n              if (value === '' || value === null || typeof value === 'undefined') {\n                return valueRenderer(cell, i, j);\n              }\n              return value;\n            }).join('\\t');\n          }).join('\\n');\n          if (window.clipboardData && window.clipboardData.setData) {\n            window.clipboardData.setData('Text', text);\n          } else {\n            e.clipboardData.setData('text/plain', text);\n          }\n        }\n      }\n    }\n  }, {\n    key: 'handlePaste',\n    value: function handlePaste(e) {\n      if (isEmpty(this.state.editing)) {\n        var _getState3 = this.getState(),\n            start = _getState3.start,\n            end = _getState3.end;\n\n        start = { i: Math.min(start.i, end.i), j: Math.min(start.j, end.j) };\n        end = { i: Math.max(start.i, end.i), j: Math.max(start.j, end.j) };\n\n        var parse = this.props.parsePaste || defaultParsePaste;\n        var changes = [];\n        var pasteData = [];\n        if (window.clipboardData && window.clipboardData.getData) {\n          // IE\n          pasteData = parse(window.clipboardData.getData('Text'));\n        } else if (e.clipboardData && e.clipboardData.getData) {\n          pasteData = parse(e.clipboardData.getData('text/plain'));\n        }\n\n        // in order of preference\n        var _props3 = this.props,\n            data = _props3.data,\n            onCellsChanged = _props3.onCellsChanged,\n            onPaste = _props3.onPaste,\n            onChange = _props3.onChange;\n\n        if (onCellsChanged) {\n          var additions = [];\n          pasteData.forEach(function (row, i) {\n            row.forEach(function (value, j) {\n              end = { i: start.i + i, j: start.j + j };\n              var cell = data[end.i] && data[end.i][end.j];\n              if (!cell) {\n                additions.push({ row: end.i, col: end.j, value: value });\n              } else if (!cell.readOnly) {\n                changes.push({ cell: cell, row: end.i, col: end.j, value: value });\n              }\n            });\n          });\n          if (additions.length) {\n            onCellsChanged(changes, additions);\n          } else {\n            onCellsChanged(changes);\n          }\n        } else if (onPaste) {\n          pasteData.forEach(function (row, i) {\n            var rowData = [];\n            row.forEach(function (pastedData, j) {\n              end = { i: start.i + i, j: start.j + j };\n              var cell = data[end.i] && data[end.i][end.j];\n              rowData.push({ cell: cell, data: pastedData });\n            });\n            changes.push(rowData);\n          });\n          onPaste(changes);\n        } else if (onChange) {\n          pasteData.forEach(function (row, i) {\n            row.forEach(function (value, j) {\n              end = { i: start.i + i, j: start.j + j };\n              var cell = data[end.i] && data[end.i][end.j];\n              if (cell && !cell.readOnly) {\n                onChange(cell, end.i, end.j, value);\n              }\n            });\n          });\n        }\n        this._setState({ end: end });\n      }\n    }\n  }, {\n    key: 'handleKeyboardCellMovement',\n    value: function handleKeyboardCellMovement(e) {\n      var commit = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n      var _getState4 = this.getState(),\n          start = _getState4.start,\n          editing = _getState4.editing;\n\n      var data = this.props.data;\n\n      var isEditing = editing && !isEmpty(editing);\n      var currentCell = data[start.i] && data[start.i][start.j];\n\n      if (isEditing && !commit) {\n        return false;\n      }\n      var hasComponent = currentCell && currentCell.component;\n\n      var keyCode = e.which || e.keyCode;\n\n      if (hasComponent && isEditing) {\n        e.preventDefault();\n        return;\n      }\n\n      if (keyCode === _keys.TAB_KEY) {\n        this.handleNavigate(e, { i: 0, j: e.shiftKey ? -1 : 1 }, true);\n      } else if (keyCode === _keys.RIGHT_KEY) {\n        this.handleNavigate(e, { i: 0, j: 1 });\n      } else if (keyCode === _keys.LEFT_KEY) {\n        this.handleNavigate(e, { i: 0, j: -1 });\n      } else if (keyCode === _keys.UP_KEY) {\n        this.handleNavigate(e, { i: -1, j: 0 });\n      } else if (keyCode === _keys.DOWN_KEY) {\n        this.handleNavigate(e, { i: 1, j: 0 });\n      } else if (commit && keyCode === _keys.ENTER_KEY) {\n        this.handleNavigate(e, { i: e.shiftKey ? -1 : 1, j: 0 });\n      }\n    }\n  }, {\n    key: 'handleKey',\n    value: function handleKey(e) {\n      if (e.isPropagationStopped && e.isPropagationStopped()) {\n        return;\n      }\n      var keyCode = e.which || e.keyCode;\n\n      var _getState5 = this.getState(),\n          start = _getState5.start,\n          end = _getState5.end,\n          editing = _getState5.editing;\n\n      var isEditing = editing && !isEmpty(editing);\n      var noCellsSelected = !start || isEmpty(start);\n      var ctrlKeyPressed = e.ctrlKey || e.metaKey;\n      var deleteKeysPressed = keyCode === _keys.DELETE_KEY || keyCode === _keys.BACKSPACE_KEY;\n      var enterKeyPressed = keyCode === _keys.ENTER_KEY;\n      var numbersPressed = keyCode >= 48 && keyCode <= 57;\n      var lettersPressed = keyCode >= 65 && keyCode <= 90;\n      var latin1Supplement = keyCode >= 160 && keyCode <= 255;\n      var numPadKeysPressed = keyCode >= 96 && keyCode <= 105;\n      var currentCell = !noCellsSelected && this.props.data[start.i][start.j];\n      var equationKeysPressed = [187 /* equal */\n      , 189 /* substract */\n      , 190 /* period */\n      , 107 /* add */\n      , 109 /* decimal point */\n      , 110].indexOf(keyCode) > -1;\n\n      if (noCellsSelected || ctrlKeyPressed) {\n        return true;\n      }\n\n      if (!isEditing) {\n        this.handleKeyboardCellMovement(e);\n        if (deleteKeysPressed) {\n          e.preventDefault();\n          this.clearSelectedCells(start, end);\n        } else if (currentCell && !currentCell.readOnly) {\n          if (enterKeyPressed) {\n            this._setState({ editing: start, clear: {}, forceEdit: true });\n            e.preventDefault();\n          } else if (numbersPressed || numPadKeysPressed || lettersPressed || latin1Supplement || equationKeysPressed) {\n            // empty out cell if user starts typing without pressing enter\n            this._setState({ editing: start, clear: start, forceEdit: false });\n          }\n        }\n      }\n    }\n  }, {\n    key: 'getSelectedCells',\n    value: function getSelectedCells(data, start, end) {\n      var selected = [];\n      range(start.i, end.i).map(function (row) {\n        range(start.j, end.j).map(function (col) {\n          if (data[row] && data[row][col]) {\n            selected.push({ cell: data[row][col], row: row, col: col });\n          }\n        });\n      });\n      return selected;\n    }\n  }, {\n    key: 'clearSelectedCells',\n    value: function clearSelectedCells(start, end) {\n      var _this2 = this;\n\n      var _props4 = this.props,\n          data = _props4.data,\n          onCellsChanged = _props4.onCellsChanged,\n          onChange = _props4.onChange;\n\n      var cells = this.getSelectedCells(data, start, end).filter(function (cell) {\n        return !cell.cell.readOnly;\n      }).map(function (cell) {\n        return _extends({}, cell, { value: '' });\n      });\n      if (onCellsChanged) {\n        onCellsChanged(cells);\n        this.onRevert();\n      } else if (onChange) {\n        // ugly solution brought to you by https://reactjs.org/docs/react-component.html#setstate\n        // setState in a loop is unreliable\n        setTimeout(function () {\n          cells.forEach(function (_ref2) {\n            var cell = _ref2.cell,\n                row = _ref2.row,\n                col = _ref2.col,\n                value = _ref2.value;\n\n            onChange(cell, row, col, value);\n          });\n          _this2.onRevert();\n        }, 0);\n      }\n    }\n  }, {\n    key: 'updateLocationSingleCell',\n    value: function updateLocationSingleCell(location) {\n      this._setState({\n        start: location,\n        end: location,\n        editing: {}\n      });\n    }\n  }, {\n    key: 'updateLocationMultipleCells',\n    value: function updateLocationMultipleCells(offsets) {\n      var _getState6 = this.getState(),\n          start = _getState6.start,\n          end = _getState6.end;\n\n      var data = this.props.data;\n\n      var oldStartLocation = { i: start.i, j: start.j };\n      var newEndLocation = {\n        i: end.i + offsets.i,\n        j: Math.min(data[0].length - 1, Math.max(0, end.j + offsets.j))\n      };\n      this._setState({\n        start: oldStartLocation,\n        end: newEndLocation,\n        editing: {}\n      });\n    }\n  }, {\n    key: 'searchForNextSelectablePos',\n    value: function searchForNextSelectablePos(isCellNavigable, data, start, offsets, jumpRow) {\n      var previousRow = function previousRow(location) {\n        return {\n          i: location.i - 1,\n          j: data[0].length - 1\n        };\n      };\n      var nextRow = function nextRow(location) {\n        return { i: location.i + 1, j: 0 };\n      };\n      var advanceOffset = function advanceOffset(location) {\n        return {\n          i: location.i + offsets.i,\n          j: location.j + offsets.j\n        };\n      };\n      var isCellDefined = function isCellDefined(_ref3) {\n        var i = _ref3.i,\n            j = _ref3.j;\n        return data[i] && typeof data[i][j] !== 'undefined';\n      };\n\n      var newLocation = advanceOffset(start);\n\n      while (isCellDefined(newLocation) && !isCellNavigable(data[newLocation.i][newLocation.j], newLocation.i, newLocation.j)) {\n        newLocation = advanceOffset(newLocation);\n      }\n\n      if (!isCellDefined(newLocation)) {\n        if (!jumpRow) {\n          return null;\n        }\n        if (offsets.j < 0) {\n          newLocation = previousRow(newLocation);\n        } else {\n          newLocation = nextRow(newLocation);\n        }\n      }\n\n      if (isCellDefined(newLocation) && !isCellNavigable(data[newLocation.i][newLocation.j], newLocation.i, newLocation.j)) {\n        return this.searchForNextSelectablePos(isCellNavigable, data, newLocation, offsets, jumpRow);\n      } else if (isCellDefined(newLocation)) {\n        return newLocation;\n      } else {\n        return null;\n      }\n    }\n  }, {\n    key: 'handleNavigate',\n    value: function handleNavigate(e, offsets, jumpRow) {\n      if (offsets && (offsets.i || offsets.j)) {\n        var data = this.props.data;\n\n        var _getState7 = this.getState(),\n            start = _getState7.start;\n\n        var multiSelect = e.shiftKey && !jumpRow;\n        var isCellNavigable = this.props.isCellNavigable ? this.props.isCellNavigable : function () {\n          return true;\n        };\n\n        if (multiSelect) {\n          this.updateLocationMultipleCells(offsets);\n        } else {\n          var newLocation = this.searchForNextSelectablePos(isCellNavigable, data, start, offsets, jumpRow);\n          if (newLocation) {\n            this.updateLocationSingleCell(newLocation);\n          }\n        }\n        e.preventDefault();\n      }\n    }\n  }, {\n    key: 'handleComponentKey',\n    value: function handleComponentKey(e) {\n      var _this3 = this;\n\n      // handles keyboard events when editing components\n      var keyCode = e.which || e.keyCode;\n      if (![_keys.ENTER_KEY, _keys.ESCAPE_KEY, _keys.TAB_KEY].includes(keyCode)) {\n        return;\n      }\n      var editing = this.state.editing;\n      var data = this.props.data;\n\n      var isEditing = !isEmpty(editing);\n      if (isEditing) {\n        var currentCell = data[editing.i][editing.j];\n        var offset = e.shiftKey ? -1 : 1;\n        if (currentCell && currentCell.component && !currentCell.forceComponent) {\n          e.preventDefault();\n          var func = this.onRevert; // ESCAPE_KEY\n          if (keyCode === _keys.ENTER_KEY) {\n            func = function func() {\n              return _this3.handleNavigate(e, { i: offset, j: 0 });\n            };\n          } else if (keyCode === _keys.TAB_KEY) {\n            func = function func() {\n              return _this3.handleNavigate(e, { i: 0, j: offset }, true);\n            };\n          }\n          // setTimeout makes sure that component is done handling the event before we take over\n          setTimeout(function () {\n            func();\n            _this3.dgDom && _this3.dgDom.focus({ preventScroll: true });\n          }, 1);\n        }\n      }\n    }\n  }, {\n    key: 'onContextMenu',\n    value: function onContextMenu(evt, i, j) {\n      var cell = this.props.data[i][j];\n      if (this.props.onContextMenu) {\n        this.props.onContextMenu(evt, cell, i, j);\n      }\n    }\n  }, {\n    key: 'onDoubleClick',\n    value: function onDoubleClick(i, j) {\n      var cell = this.props.data[i][j];\n      if (!cell.readOnly) {\n        this._setState({ editing: { i: i, j: j }, forceEdit: true, clear: {} });\n      }\n    }\n  }, {\n    key: 'onMouseDown',\n    value: function onMouseDown(i, j, e) {\n      var isNowEditingSameCell = !isEmpty(this.state.editing) && this.state.editing.i === i && this.state.editing.j === j;\n      var editing = isEmpty(this.state.editing) || this.state.editing.i !== i || this.state.editing.j !== j ? {} : this.state.editing;\n\n      this._setState({\n        selecting: !isNowEditingSameCell,\n        start: e.shiftKey ? this.state.start : { i: i, j: j },\n        end: { i: i, j: j },\n        editing: editing,\n        forceEdit: !!isNowEditingSameCell\n      });\n\n      var ua = window.navigator.userAgent;\n      var isIE = /MSIE|Trident/.test(ua);\n      // Listen for Ctrl + V in case of IE\n      if (isIE) {\n        document.addEventListener('keydown', this.handleIEClipboardEvents);\n      }\n\n      // Keep listening to mouse if user releases the mouse (dragging outside)\n      document.addEventListener('mouseup', this.onMouseUp);\n      // Listen for any outside mouse clicks\n      document.addEventListener('mousedown', this.pageClick);\n\n      // Cut, copy and paste event handlers\n      document.addEventListener('cut', this.handleCut);\n      document.addEventListener('copy', this.handleCopy);\n      document.addEventListener('paste', this.handlePaste);\n    }\n  }, {\n    key: 'onMouseOver',\n    value: function onMouseOver(i, j) {\n      if (this.state.selecting && isEmpty(this.state.editing)) {\n        this._setState({ end: { i: i, j: j } });\n      }\n    }\n  }, {\n    key: 'onMouseUp',\n    value: function onMouseUp() {\n      this._setState({ selecting: false });\n      document.removeEventListener('mouseup', this.onMouseUp);\n    }\n  }, {\n    key: 'onChange',\n    value: function onChange(row, col, value) {\n      var _props5 = this.props,\n          onChange = _props5.onChange,\n          onCellsChanged = _props5.onCellsChanged,\n          data = _props5.data;\n\n      if (onCellsChanged) {\n        onCellsChanged([{ cell: data[row][col], row: row, col: col, value: value }]);\n      } else if (onChange) {\n        onChange(data[row][col], row, col, value);\n      }\n      this.onRevert();\n    }\n  }, {\n    key: 'onRevert',\n    value: function onRevert() {\n      this._setState({ editing: {} });\n      this.dgDom && this.dgDom.focus({ preventScroll: true });\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate(prevProps, prevState) {\n      var _state = this.state,\n          start = _state.start,\n          end = _state.end;\n\n      var prevEnd = prevState.end;\n      if (!isEmpty(end) && !(end.i === prevEnd.i && end.j === prevEnd.j) && !this.isSelectionControlled()) {\n        this.props.onSelect && this.props.onSelect({ start: start, end: end });\n      }\n    }\n  }, {\n    key: 'isSelected',\n    value: function isSelected(i, j) {\n      var _getState8 = this.getState(),\n          start = _getState8.start,\n          end = _getState8.end;\n\n      var posX = j >= start.j && j <= end.j;\n      var negX = j <= start.j && j >= end.j;\n      var posY = i >= start.i && i <= end.i;\n      var negY = i <= start.i && i >= end.i;\n\n      return posX && posY || negX && posY || negX && negY || posX && negY;\n    }\n  }, {\n    key: 'isEditing',\n    value: function isEditing(i, j) {\n      return this.state.editing.i === i && this.state.editing.j === j;\n    }\n  }, {\n    key: 'isClearing',\n    value: function isClearing(i, j) {\n      return this.state.clear.i === i && this.state.clear.j === j;\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this4 = this;\n\n      var _props6 = this.props,\n          SheetRenderer = _props6.sheetRenderer,\n          RowRenderer = _props6.rowRenderer,\n          cellRenderer = _props6.cellRenderer,\n          dataRenderer = _props6.dataRenderer,\n          valueRenderer = _props6.valueRenderer,\n          dataEditor = _props6.dataEditor,\n          valueViewer = _props6.valueViewer,\n          attributesRenderer = _props6.attributesRenderer,\n          className = _props6.className,\n          overflow = _props6.overflow,\n          data = _props6.data,\n          keyFn = _props6.keyFn;\n      var forceEdit = this.state.forceEdit;\n\n      return _react2.default.createElement(\n        'span',\n        {\n          ref: function ref(r) {\n            _this4.dgDom = r;\n          },\n          tabIndex: '0',\n          className: 'data-grid-container',\n          onKeyDown: this.handleKey\n        },\n        _react2.default.createElement(\n          SheetRenderer,\n          {\n            data: data,\n            className: ['data-grid', className, overflow].filter(function (a) {\n              return a;\n            }).join(' ')\n          },\n          data.map(function (row, i) {\n            return _react2.default.createElement(\n              RowRenderer,\n              { key: keyFn ? keyFn(i) : i, row: i, cells: row },\n              row.map(function (cell, j) {\n                var isEditing = _this4.isEditing(i, j);\n                return _react2.default.createElement(_DataCell2.default, _extends({\n                  key: cell.key ? cell.key : i + '-' + j,\n                  row: i,\n                  col: j,\n                  cell: cell,\n                  forceEdit: false,\n                  onMouseDown: _this4.onMouseDown,\n                  onMouseOver: _this4.onMouseOver,\n                  onDoubleClick: _this4.onDoubleClick,\n                  onContextMenu: _this4.onContextMenu,\n                  onChange: _this4.onChange,\n                  onRevert: _this4.onRevert,\n                  onNavigate: _this4.handleKeyboardCellMovement,\n                  onKey: _this4.handleKey,\n                  selected: _this4.isSelected(i, j),\n                  editing: isEditing,\n                  clearing: _this4.isClearing(i, j),\n                  attributesRenderer: attributesRenderer,\n                  cellRenderer: cellRenderer,\n                  valueRenderer: valueRenderer,\n                  dataRenderer: dataRenderer,\n                  valueViewer: valueViewer,\n                  dataEditor: dataEditor\n                }, isEditing ? {\n                  forceEdit: forceEdit\n                } : {}));\n              })\n            );\n          })\n        )\n      );\n    }\n  }]);\n\n  return DataSheet;\n}(_react.PureComponent);\n\nexports.default = DataSheet;\n\n\nDataSheet.propTypes = {\n  data: _propTypes2.default.array.isRequired,\n  className: _propTypes2.default.string,\n  disablePageClick: _propTypes2.default.bool,\n  overflow: _propTypes2.default.oneOf(['wrap', 'nowrap', 'clip']),\n  onChange: _propTypes2.default.func,\n  onCellsChanged: _propTypes2.default.func,\n  onContextMenu: _propTypes2.default.func,\n  onSelect: _propTypes2.default.func,\n  isCellNavigable: _propTypes2.default.func,\n  selected: _propTypes2.default.shape({\n    start: _propTypes2.default.shape({\n      i: _propTypes2.default.number,\n      j: _propTypes2.default.number\n    }),\n    end: _propTypes2.default.shape({\n      i: _propTypes2.default.number,\n      j: _propTypes2.default.number\n    })\n  }),\n  valueRenderer: _propTypes2.default.func.isRequired,\n  dataRenderer: _propTypes2.default.func,\n  sheetRenderer: _propTypes2.default.func.isRequired,\n  rowRenderer: _propTypes2.default.func.isRequired,\n  cellRenderer: _propTypes2.default.func.isRequired,\n  valueViewer: _propTypes2.default.func,\n  dataEditor: _propTypes2.default.func,\n  parsePaste: _propTypes2.default.func,\n  attributesRenderer: _propTypes2.default.func,\n  keyFn: _propTypes2.default.func,\n  handleCopy: _propTypes2.default.func\n};\n\nDataSheet.defaultProps = {\n  sheetRenderer: _Sheet2.default,\n  rowRenderer: _Row2.default,\n  cellRenderer: _Cell2.default,\n  valueViewer: _ValueViewer2.default,\n  dataEditor: _DataEditor2.default\n};"]},"metadata":{},"sourceType":"script"}