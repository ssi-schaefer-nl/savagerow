{"ast":null,"code":"var _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nfunction _toConsumableArray(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  } else {\n    return Array.from(arr);\n  }\n}\n\nimport React, { Component } from 'react';\nimport ContextMenuTrigger from './ContextMenuTrigger';\nimport listener from './globalEventListener'; // collect ContextMenuTrigger's expected props to NOT pass them on as part of the context\n\nvar ignoredTriggerProps = [].concat(_toConsumableArray(Object.keys(ContextMenuTrigger.propTypes)), ['children']); // expect the id of the menu to be responsible for as outer parameter\n\nexport default function (menuId) {\n  // expect menu component to connect as inner parameter\n  // <Child/> is presumably a wrapper of <ContextMenu/>\n  return function connect(Child) {\n    // return wrapper for <Child/> that forwards the ContextMenuTrigger's additional props\n    return function (_Component) {\n      _inherits(ConnectMenu, _Component);\n\n      function ConnectMenu(props) {\n        _classCallCheck(this, ConnectMenu);\n\n        var _this = _possibleConstructorReturn(this, (ConnectMenu.__proto__ || Object.getPrototypeOf(ConnectMenu)).call(this, props));\n\n        _this.handleShow = function (e) {\n          if (e.detail.id !== menuId) return; // the onShow event's detail.data object holds all ContextMenuTrigger props\n\n          var data = e.detail.data;\n          var filteredData = {};\n\n          for (var key in data) {\n            // exclude props the ContextMenuTrigger is expecting itself\n            if (!ignoredTriggerProps.includes(key)) {\n              filteredData[key] = data[key];\n            }\n          }\n\n          _this.setState({\n            trigger: filteredData\n          });\n        };\n\n        _this.handleHide = function () {\n          _this.setState({\n            trigger: null\n          });\n        };\n\n        _this.state = {\n          trigger: null\n        };\n        return _this;\n      }\n\n      _createClass(ConnectMenu, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n          this.listenId = listener.register(this.handleShow, this.handleHide);\n        }\n      }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n          if (this.listenId) {\n            listener.unregister(this.listenId);\n          }\n        }\n      }, {\n        key: 'render',\n        value: function render() {\n          return React.createElement(Child, _extends({}, this.props, {\n            id: menuId,\n            trigger: this.state.trigger\n          }));\n        }\n      }]);\n\n      return ConnectMenu;\n    }(Component);\n  };\n}","map":{"version":3,"sources":["C:/Users/vincent/git/playground/node_modules/react-contextmenu/es6/connectMenu.js"],"names":["_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_createClass","defineProperties","props","descriptor","enumerable","configurable","writable","defineProperty","Constructor","protoProps","staticProps","_classCallCheck","instance","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","value","setPrototypeOf","__proto__","_toConsumableArray","arr","Array","isArray","arr2","from","React","Component","ContextMenuTrigger","listener","ignoredTriggerProps","concat","keys","propTypes","menuId","connect","Child","_Component","ConnectMenu","_this","getPrototypeOf","handleShow","e","detail","id","data","filteredData","includes","setState","trigger","handleHide","state","componentDidMount","listenId","register","componentWillUnmount","unregister","render","createElement"],"mappings":"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","sourcesContent":["var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nimport React, { Component } from 'react';\n\nimport ContextMenuTrigger from './ContextMenuTrigger';\nimport listener from './globalEventListener';\n\n// collect ContextMenuTrigger's expected props to NOT pass them on as part of the context\nvar ignoredTriggerProps = [].concat(_toConsumableArray(Object.keys(ContextMenuTrigger.propTypes)), ['children']);\n\n// expect the id of the menu to be responsible for as outer parameter\nexport default function (menuId) {\n    // expect menu component to connect as inner parameter\n    // <Child/> is presumably a wrapper of <ContextMenu/>\n    return function connect(Child) {\n        // return wrapper for <Child/> that forwards the ContextMenuTrigger's additional props\n        return function (_Component) {\n            _inherits(ConnectMenu, _Component);\n\n            function ConnectMenu(props) {\n                _classCallCheck(this, ConnectMenu);\n\n                var _this = _possibleConstructorReturn(this, (ConnectMenu.__proto__ || Object.getPrototypeOf(ConnectMenu)).call(this, props));\n\n                _this.handleShow = function (e) {\n                    if (e.detail.id !== menuId) return;\n\n                    // the onShow event's detail.data object holds all ContextMenuTrigger props\n                    var data = e.detail.data;\n\n                    var filteredData = {};\n\n                    for (var key in data) {\n                        // exclude props the ContextMenuTrigger is expecting itself\n                        if (!ignoredTriggerProps.includes(key)) {\n                            filteredData[key] = data[key];\n                        }\n                    }\n                    _this.setState({ trigger: filteredData });\n                };\n\n                _this.handleHide = function () {\n                    _this.setState({ trigger: null });\n                };\n\n                _this.state = { trigger: null };\n                return _this;\n            }\n\n            _createClass(ConnectMenu, [{\n                key: 'componentDidMount',\n                value: function componentDidMount() {\n                    this.listenId = listener.register(this.handleShow, this.handleHide);\n                }\n            }, {\n                key: 'componentWillUnmount',\n                value: function componentWillUnmount() {\n                    if (this.listenId) {\n                        listener.unregister(this.listenId);\n                    }\n                }\n            }, {\n                key: 'render',\n                value: function render() {\n                    return React.createElement(Child, _extends({}, this.props, { id: menuId, trigger: this.state.trigger }));\n                }\n            }]);\n\n            return ConnectMenu;\n        }(Component);\n    };\n}"]},"metadata":{},"sourceType":"module"}