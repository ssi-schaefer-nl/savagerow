{"ast":null,"code":"var _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport cx from 'classnames';\nimport assign from 'object-assign';\nimport { hideMenu } from './actions';\nimport AbstractMenu from './AbstractMenu';\nimport { callIfExists, cssClasses, hasOwnProp, store } from './helpers';\nimport listener from './globalEventListener';\n\nvar SubMenu = function (_AbstractMenu) {\n  _inherits(SubMenu, _AbstractMenu);\n\n  function SubMenu(props) {\n    _classCallCheck(this, SubMenu);\n\n    var _this = _possibleConstructorReturn(this, (SubMenu.__proto__ || Object.getPrototypeOf(SubMenu)).call(this, props));\n\n    _this.getMenuPosition = function () {\n      var _window = window,\n          innerWidth = _window.innerWidth,\n          innerHeight = _window.innerHeight;\n\n      var rect = _this.subMenu.getBoundingClientRect();\n\n      var position = {};\n\n      if (rect.bottom > innerHeight) {\n        position.bottom = 0;\n      } else {\n        position.top = 0;\n      }\n\n      if (rect.right < innerWidth) {\n        position.left = '100%';\n      } else {\n        position.right = '100%';\n      }\n\n      return position;\n    };\n\n    _this.getRTLMenuPosition = function () {\n      var _window2 = window,\n          innerHeight = _window2.innerHeight;\n\n      var rect = _this.subMenu.getBoundingClientRect();\n\n      var position = {};\n\n      if (rect.bottom > innerHeight) {\n        position.bottom = 0;\n      } else {\n        position.top = 0;\n      }\n\n      if (rect.left < 0) {\n        position.left = '100%';\n      } else {\n        position.right = '100%';\n      }\n\n      return position;\n    };\n\n    _this.hideSubMenu = function (e) {\n      // avoid closing submenus of a different menu tree\n      if (e.detail && e.detail.id && _this.menu && e.detail.id !== _this.menu.id) {\n        return;\n      }\n\n      if (_this.props.forceOpen) {\n        _this.props.forceClose();\n      }\n\n      _this.setState({\n        visible: false,\n        selectedItem: null\n      });\n\n      _this.unregisterHandlers();\n    };\n\n    _this.handleClick = function (event) {\n      event.preventDefault();\n      if (_this.props.disabled) return;\n      callIfExists(_this.props.onClick, event, assign({}, _this.props.data, store.data), store.target);\n      if (!_this.props.onClick || _this.props.preventCloseOnClick) return;\n      hideMenu();\n    };\n\n    _this.handleMouseEnter = function () {\n      if (_this.closetimer) clearTimeout(_this.closetimer);\n      if (_this.props.disabled || _this.state.visible) return;\n      _this.opentimer = setTimeout(function () {\n        return _this.setState({\n          visible: true,\n          selectedItem: null\n        });\n      }, _this.props.hoverDelay);\n    };\n\n    _this.handleMouseLeave = function () {\n      if (_this.opentimer) clearTimeout(_this.opentimer);\n      if (!_this.state.visible) return;\n      _this.closetimer = setTimeout(function () {\n        return _this.setState({\n          visible: false,\n          selectedItem: null\n        });\n      }, _this.props.hoverDelay);\n    };\n\n    _this.menuRef = function (c) {\n      _this.menu = c;\n    };\n\n    _this.subMenuRef = function (c) {\n      _this.subMenu = c;\n    };\n\n    _this.registerHandlers = function () {\n      document.removeEventListener('keydown', _this.props.parentKeyNavigationHandler);\n      document.addEventListener('keydown', _this.handleKeyNavigation);\n    };\n\n    _this.unregisterHandlers = function (dismounting) {\n      document.removeEventListener('keydown', _this.handleKeyNavigation);\n\n      if (!dismounting) {\n        document.addEventListener('keydown', _this.props.parentKeyNavigationHandler);\n      }\n    };\n\n    _this.state = assign({}, _this.state, {\n      visible: false\n    });\n    return _this;\n  }\n\n  _createClass(SubMenu, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      this.listenId = listener.register(function () {}, this.hideSubMenu);\n    }\n  }, {\n    key: 'getSubMenuType',\n    value: function getSubMenuType() {\n      // eslint-disable-line class-methods-use-this\n      return SubMenu;\n    }\n  }, {\n    key: 'shouldComponentUpdate',\n    value: function shouldComponentUpdate(nextProps, nextState) {\n      this.isVisibilityChange = (this.state.visible !== nextState.visible || this.props.forceOpen !== nextProps.forceOpen) && !(this.state.visible && nextProps.forceOpen) && !(this.props.forceOpen && nextState.visible);\n      return true;\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate() {\n      var _this2 = this;\n\n      if (!this.isVisibilityChange) return;\n\n      if (this.props.forceOpen || this.state.visible) {\n        var wrapper = window.requestAnimationFrame || setTimeout;\n        wrapper(function () {\n          var styles = _this2.props.rtl ? _this2.getRTLMenuPosition() : _this2.getMenuPosition();\n\n          _this2.subMenu.style.removeProperty('top');\n\n          _this2.subMenu.style.removeProperty('bottom');\n\n          _this2.subMenu.style.removeProperty('left');\n\n          _this2.subMenu.style.removeProperty('right');\n\n          if (hasOwnProp(styles, 'top')) _this2.subMenu.style.top = styles.top;\n          if (hasOwnProp(styles, 'left')) _this2.subMenu.style.left = styles.left;\n          if (hasOwnProp(styles, 'bottom')) _this2.subMenu.style.bottom = styles.bottom;\n          if (hasOwnProp(styles, 'right')) _this2.subMenu.style.right = styles.right;\n\n          _this2.subMenu.classList.add(cssClasses.menuVisible);\n\n          _this2.registerHandlers();\n\n          _this2.setState({\n            selectedItem: null\n          });\n        });\n      } else {\n        var cleanup = function cleanup() {\n          _this2.subMenu.removeEventListener('transitionend', cleanup);\n\n          _this2.subMenu.style.removeProperty('bottom');\n\n          _this2.subMenu.style.removeProperty('right');\n\n          _this2.subMenu.style.top = 0;\n          _this2.subMenu.style.left = '100%';\n\n          _this2.unregisterHandlers();\n        };\n\n        this.subMenu.addEventListener('transitionend', cleanup);\n        this.subMenu.classList.remove(cssClasses.menuVisible);\n      }\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      if (this.listenId) {\n        listener.unregister(this.listenId);\n      }\n\n      if (this.opentimer) clearTimeout(this.opentimer);\n      if (this.closetimer) clearTimeout(this.closetimer);\n      this.unregisterHandlers(true);\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _cx;\n\n      var _props = this.props,\n          children = _props.children,\n          attributes = _props.attributes,\n          disabled = _props.disabled,\n          title = _props.title,\n          selected = _props.selected;\n      var visible = this.state.visible;\n      var menuProps = {\n        ref: this.menuRef,\n        onMouseEnter: this.handleMouseEnter,\n        onMouseLeave: this.handleMouseLeave,\n        className: cx(cssClasses.menuItem, cssClasses.subMenu, attributes.listClassName),\n        style: {\n          position: 'relative'\n        }\n      };\n      var menuItemProps = {\n        className: cx(cssClasses.menuItem, attributes.className, (_cx = {}, _defineProperty(_cx, cx(cssClasses.menuItemDisabled, attributes.disabledClassName), disabled), _defineProperty(_cx, cx(cssClasses.menuItemActive, attributes.visibleClassName), visible), _defineProperty(_cx, cx(cssClasses.menuItemSelected, attributes.selectedClassName), selected), _cx)),\n        onMouseMove: this.props.onMouseMove,\n        onMouseOut: this.props.onMouseOut,\n        onClick: this.handleClick\n      };\n      var subMenuProps = {\n        ref: this.subMenuRef,\n        style: {\n          position: 'absolute',\n          transition: 'opacity 1ms',\n          // trigger transitionend event\n          top: 0,\n          left: '100%'\n        },\n        className: cx(cssClasses.menu, this.props.className)\n      };\n      return React.createElement('nav', _extends({}, menuProps, {\n        role: 'menuitem',\n        tabIndex: '-1',\n        'aria-haspopup': 'true'\n      }), React.createElement('div', _extends({}, attributes, menuItemProps), title), React.createElement('nav', _extends({}, subMenuProps, {\n        role: 'menu',\n        tabIndex: '-1'\n      }), this.renderChildren(children)));\n    }\n  }]);\n\n  return SubMenu;\n}(AbstractMenu);\n\nSubMenu.propTypes = {\n  children: PropTypes.node.isRequired,\n  attributes: PropTypes.object,\n  title: PropTypes.node.isRequired,\n  className: PropTypes.string,\n  disabled: PropTypes.bool,\n  hoverDelay: PropTypes.number,\n  rtl: PropTypes.bool,\n  selected: PropTypes.bool,\n  onMouseMove: PropTypes.func,\n  onMouseOut: PropTypes.func,\n  forceOpen: PropTypes.bool,\n  forceClose: PropTypes.func,\n  parentKeyNavigationHandler: PropTypes.func\n};\nSubMenu.defaultProps = {\n  disabled: false,\n  hoverDelay: 500,\n  attributes: {},\n  className: '',\n  rtl: false,\n  selected: false,\n  onMouseMove: function onMouseMove() {\n    return null;\n  },\n  onMouseOut: function onMouseOut() {\n    return null;\n  },\n  forceOpen: false,\n  forceClose: function forceClose() {\n    return null;\n  },\n  parentKeyNavigationHandler: function parentKeyNavigationHandler() {\n    return null;\n  }\n};\nexport default SubMenu;","map":{"version":3,"sources":["C:/Users/vincent/git/playground/node_modules/react-contextmenu/es6/SubMenu.js"],"names":["_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_createClass","defineProperties","props","descriptor","enumerable","configurable","writable","defineProperty","Constructor","protoProps","staticProps","_defineProperty","obj","value","_classCallCheck","instance","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","React","PropTypes","cx","hideMenu","AbstractMenu","callIfExists","cssClasses","hasOwnProp","store","listener","SubMenu","_AbstractMenu","_this","getPrototypeOf","getMenuPosition","_window","window","innerWidth","innerHeight","rect","subMenu","getBoundingClientRect","position","bottom","top","right","left","getRTLMenuPosition","_window2","hideSubMenu","e","detail","id","menu","forceOpen","forceClose","setState","visible","selectedItem","unregisterHandlers","handleClick","event","preventDefault","disabled","onClick","data","preventCloseOnClick","handleMouseEnter","closetimer","clearTimeout","state","opentimer","setTimeout","hoverDelay","handleMouseLeave","menuRef","c","subMenuRef","registerHandlers","document","removeEventListener","parentKeyNavigationHandler","addEventListener","handleKeyNavigation","dismounting","componentDidMount","listenId","register","getSubMenuType","shouldComponentUpdate","nextProps","nextState","isVisibilityChange","componentDidUpdate","_this2","wrapper","requestAnimationFrame","styles","rtl","style","removeProperty","classList","add","menuVisible","cleanup","remove","componentWillUnmount","unregister","render","_cx","_props","children","attributes","title","selected","menuProps","ref","onMouseEnter","onMouseLeave","className","menuItem","listClassName","menuItemProps","menuItemDisabled","disabledClassName","menuItemActive","visibleClassName","menuItemSelected","selectedClassName","onMouseMove","onMouseOut","subMenuProps","transition","createElement","role","tabIndex","renderChildren","propTypes","node","isRequired","object","string","bool","number","func","defaultProps"],"mappings":"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","sourcesContent":["var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport cx from 'classnames';\nimport assign from 'object-assign';\n\nimport { hideMenu } from './actions';\nimport AbstractMenu from './AbstractMenu';\nimport { callIfExists, cssClasses, hasOwnProp, store } from './helpers';\nimport listener from './globalEventListener';\n\nvar SubMenu = function (_AbstractMenu) {\n    _inherits(SubMenu, _AbstractMenu);\n\n    function SubMenu(props) {\n        _classCallCheck(this, SubMenu);\n\n        var _this = _possibleConstructorReturn(this, (SubMenu.__proto__ || Object.getPrototypeOf(SubMenu)).call(this, props));\n\n        _this.getMenuPosition = function () {\n            var _window = window,\n                innerWidth = _window.innerWidth,\n                innerHeight = _window.innerHeight;\n\n            var rect = _this.subMenu.getBoundingClientRect();\n            var position = {};\n\n            if (rect.bottom > innerHeight) {\n                position.bottom = 0;\n            } else {\n                position.top = 0;\n            }\n\n            if (rect.right < innerWidth) {\n                position.left = '100%';\n            } else {\n                position.right = '100%';\n            }\n\n            return position;\n        };\n\n        _this.getRTLMenuPosition = function () {\n            var _window2 = window,\n                innerHeight = _window2.innerHeight;\n\n            var rect = _this.subMenu.getBoundingClientRect();\n            var position = {};\n\n            if (rect.bottom > innerHeight) {\n                position.bottom = 0;\n            } else {\n                position.top = 0;\n            }\n\n            if (rect.left < 0) {\n                position.left = '100%';\n            } else {\n                position.right = '100%';\n            }\n\n            return position;\n        };\n\n        _this.hideSubMenu = function (e) {\n            // avoid closing submenus of a different menu tree\n            if (e.detail && e.detail.id && _this.menu && e.detail.id !== _this.menu.id) {\n                return;\n            }\n\n            if (_this.props.forceOpen) {\n                _this.props.forceClose();\n            }\n            _this.setState({ visible: false, selectedItem: null });\n            _this.unregisterHandlers();\n        };\n\n        _this.handleClick = function (event) {\n            event.preventDefault();\n\n            if (_this.props.disabled) return;\n\n            callIfExists(_this.props.onClick, event, assign({}, _this.props.data, store.data), store.target);\n\n            if (!_this.props.onClick || _this.props.preventCloseOnClick) return;\n\n            hideMenu();\n        };\n\n        _this.handleMouseEnter = function () {\n            if (_this.closetimer) clearTimeout(_this.closetimer);\n\n            if (_this.props.disabled || _this.state.visible) return;\n\n            _this.opentimer = setTimeout(function () {\n                return _this.setState({\n                    visible: true,\n                    selectedItem: null\n                });\n            }, _this.props.hoverDelay);\n        };\n\n        _this.handleMouseLeave = function () {\n            if (_this.opentimer) clearTimeout(_this.opentimer);\n\n            if (!_this.state.visible) return;\n\n            _this.closetimer = setTimeout(function () {\n                return _this.setState({\n                    visible: false,\n                    selectedItem: null\n                });\n            }, _this.props.hoverDelay);\n        };\n\n        _this.menuRef = function (c) {\n            _this.menu = c;\n        };\n\n        _this.subMenuRef = function (c) {\n            _this.subMenu = c;\n        };\n\n        _this.registerHandlers = function () {\n            document.removeEventListener('keydown', _this.props.parentKeyNavigationHandler);\n            document.addEventListener('keydown', _this.handleKeyNavigation);\n        };\n\n        _this.unregisterHandlers = function (dismounting) {\n            document.removeEventListener('keydown', _this.handleKeyNavigation);\n            if (!dismounting) {\n                document.addEventListener('keydown', _this.props.parentKeyNavigationHandler);\n            }\n        };\n\n        _this.state = assign({}, _this.state, {\n            visible: false\n        });\n        return _this;\n    }\n\n    _createClass(SubMenu, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            this.listenId = listener.register(function () {}, this.hideSubMenu);\n        }\n    }, {\n        key: 'getSubMenuType',\n        value: function getSubMenuType() {\n            // eslint-disable-line class-methods-use-this\n            return SubMenu;\n        }\n    }, {\n        key: 'shouldComponentUpdate',\n        value: function shouldComponentUpdate(nextProps, nextState) {\n            this.isVisibilityChange = (this.state.visible !== nextState.visible || this.props.forceOpen !== nextProps.forceOpen) && !(this.state.visible && nextProps.forceOpen) && !(this.props.forceOpen && nextState.visible);\n            return true;\n        }\n    }, {\n        key: 'componentDidUpdate',\n        value: function componentDidUpdate() {\n            var _this2 = this;\n\n            if (!this.isVisibilityChange) return;\n            if (this.props.forceOpen || this.state.visible) {\n                var wrapper = window.requestAnimationFrame || setTimeout;\n                wrapper(function () {\n                    var styles = _this2.props.rtl ? _this2.getRTLMenuPosition() : _this2.getMenuPosition();\n\n                    _this2.subMenu.style.removeProperty('top');\n                    _this2.subMenu.style.removeProperty('bottom');\n                    _this2.subMenu.style.removeProperty('left');\n                    _this2.subMenu.style.removeProperty('right');\n\n                    if (hasOwnProp(styles, 'top')) _this2.subMenu.style.top = styles.top;\n                    if (hasOwnProp(styles, 'left')) _this2.subMenu.style.left = styles.left;\n                    if (hasOwnProp(styles, 'bottom')) _this2.subMenu.style.bottom = styles.bottom;\n                    if (hasOwnProp(styles, 'right')) _this2.subMenu.style.right = styles.right;\n                    _this2.subMenu.classList.add(cssClasses.menuVisible);\n\n                    _this2.registerHandlers();\n                    _this2.setState({ selectedItem: null });\n                });\n            } else {\n                var cleanup = function cleanup() {\n                    _this2.subMenu.removeEventListener('transitionend', cleanup);\n                    _this2.subMenu.style.removeProperty('bottom');\n                    _this2.subMenu.style.removeProperty('right');\n                    _this2.subMenu.style.top = 0;\n                    _this2.subMenu.style.left = '100%';\n                    _this2.unregisterHandlers();\n                };\n                this.subMenu.addEventListener('transitionend', cleanup);\n                this.subMenu.classList.remove(cssClasses.menuVisible);\n            }\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            if (this.listenId) {\n                listener.unregister(this.listenId);\n            }\n\n            if (this.opentimer) clearTimeout(this.opentimer);\n\n            if (this.closetimer) clearTimeout(this.closetimer);\n\n            this.unregisterHandlers(true);\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var _cx;\n\n            var _props = this.props,\n                children = _props.children,\n                attributes = _props.attributes,\n                disabled = _props.disabled,\n                title = _props.title,\n                selected = _props.selected;\n            var visible = this.state.visible;\n\n            var menuProps = {\n                ref: this.menuRef,\n                onMouseEnter: this.handleMouseEnter,\n                onMouseLeave: this.handleMouseLeave,\n                className: cx(cssClasses.menuItem, cssClasses.subMenu, attributes.listClassName),\n                style: {\n                    position: 'relative'\n                }\n            };\n            var menuItemProps = {\n                className: cx(cssClasses.menuItem, attributes.className, (_cx = {}, _defineProperty(_cx, cx(cssClasses.menuItemDisabled, attributes.disabledClassName), disabled), _defineProperty(_cx, cx(cssClasses.menuItemActive, attributes.visibleClassName), visible), _defineProperty(_cx, cx(cssClasses.menuItemSelected, attributes.selectedClassName), selected), _cx)),\n                onMouseMove: this.props.onMouseMove,\n                onMouseOut: this.props.onMouseOut,\n                onClick: this.handleClick\n            };\n            var subMenuProps = {\n                ref: this.subMenuRef,\n                style: {\n                    position: 'absolute',\n                    transition: 'opacity 1ms', // trigger transitionend event\n                    top: 0,\n                    left: '100%'\n                },\n                className: cx(cssClasses.menu, this.props.className)\n            };\n\n            return React.createElement(\n                'nav',\n                _extends({}, menuProps, { role: 'menuitem', tabIndex: '-1', 'aria-haspopup': 'true' }),\n                React.createElement(\n                    'div',\n                    _extends({}, attributes, menuItemProps),\n                    title\n                ),\n                React.createElement(\n                    'nav',\n                    _extends({}, subMenuProps, { role: 'menu', tabIndex: '-1' }),\n                    this.renderChildren(children)\n                )\n            );\n        }\n    }]);\n\n    return SubMenu;\n}(AbstractMenu);\n\nSubMenu.propTypes = {\n    children: PropTypes.node.isRequired,\n    attributes: PropTypes.object,\n    title: PropTypes.node.isRequired,\n    className: PropTypes.string,\n    disabled: PropTypes.bool,\n    hoverDelay: PropTypes.number,\n    rtl: PropTypes.bool,\n    selected: PropTypes.bool,\n    onMouseMove: PropTypes.func,\n    onMouseOut: PropTypes.func,\n    forceOpen: PropTypes.bool,\n    forceClose: PropTypes.func,\n    parentKeyNavigationHandler: PropTypes.func\n};\nSubMenu.defaultProps = {\n    disabled: false,\n    hoverDelay: 500,\n    attributes: {},\n    className: '',\n    rtl: false,\n    selected: false,\n    onMouseMove: function onMouseMove() {\n        return null;\n    },\n    onMouseOut: function onMouseOut() {\n        return null;\n    },\n    forceOpen: false,\n    forceClose: function forceClose() {\n        return null;\n    },\n    parentKeyNavigationHandler: function parentKeyNavigationHandler() {\n        return null;\n    }\n};\nexport default SubMenu;"]},"metadata":{},"sourceType":"module"}